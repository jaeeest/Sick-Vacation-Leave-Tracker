<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leave Request Form</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <?!= include('stylecss');?>
</head>
<body>

    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-left-panel">
            <div class="login-logo-section">
                <img src="https://u.cubeupload.com/devtest/51306167120262289681.png" alt="Malaya Business Insight Logo">
                <p class="login-tagline-track">Track your leave, feel <i>malaya</i>.</p>
                <p class="login-tagline-submit">Submit, manage, and track your leave requests all in one place.</p>
            </div>
        </div>
        <div class="login-right-panel">
            <div class="login-form-container">
                <div class="login-icon-hand">👋</div>
                <h2 class="login-welcome-back">Welcome back!</h2>

                <form id="loginForm">
                    <div class="login-input-group">
                        <label for="loginEmail">E-mail</label>
                        <div class="login-input-with-icon">
                            <input type="email" id="loginEmail" placeholder="department.malaya@gmail.com" required>
                        </div>
                    </div>

                    <div class="login-input-group">
                        <label for="loginPassword">Password</label>
                        <div class="login-input-with-icon">
                            <input type="password" id="loginPassword" placeholder="Password" required>
                            <i class="fas fa-eye-slash toggle-password" id="togglePassword"></i>
                        </div>
                        <div id="passwordError" class="login-error-message"></div>
                    </div>

                    <button type="submit" class="login-btn">Log In</button>
                </form>

                <p class="login-need-help">Need help? <span class="login-contact">Contact MIS</span></p>
            </div>
        </div>
    </div>

    <!-- Main Application Content -->
    <div id="appContent">
        <aside class="sidebar">
            <div>
                <div class="logo-section">
                    <img src="https://u.cubeupload.com/devtest/51306167120262289681.png" alt="Malaya Business Insight Logo">
                </div>

                <div class="profile-section">
                    <div class="profile-avatar">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <h2>Hello! 👋</h2>
                </div>

                <nav>
                    <ul>
                        <li id="navLeaveHistory">
                            <a href="#" id="leaveHistoryLink">
                                <!-- Clock Icon SVG for Leave History -->
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Leave History
                            </a>
                        </li>
                        <li id="navEmployeeBalance">
                            <a href="#" id="employeeBalanceLink">
                                <!-- Chat Icon SVG for Employee Balance -->
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                                Employee Balance
                            </a>
                        </li>
                        <li id="navAuditLogs">
                            <a href="#" id="auditLogsLink">
                                <!-- New: Audit Logs Icon -->
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Audit Logs
                            </a>
                        </li>
                        <li id="navLeaveForm">
                            <a href="#" id="leaveFormLink" class="active-link">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                </svg>
                                Leave Form
                            </a>
                        </li>
                        <li id="navFileUpload">
                            <a href="#" id="fileUploadLink">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                                </svg>
                                File Upload
                            </a>
                        </li>
                        <li id="navForceLeave">
                          <a href="#" id="forceLeaveLink" data-page="forceLeave">
                              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                              </svg>
                              Force Leave
                          </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="logout-section">
                <a href="#" class="logout-link" id="logoutLink">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H7a3 3 0 01-3-3v-1m6-6V9a3 3 0 00-3-3H7a3 3 0 00-3 3v1"></path>
                    </svg>
                    Logout
                </a>
            </div>
        </aside>

        <main class="main-content">
            <div class="step-indicator-container">
                <div class="step-indicator">
                    <div class="step-item active" data-step="1">
                        <div class="step-circle step-active">1</div>
                        <span class="step-text md-block">Fill</span>
                    </div>
                    <div class="step-line md-w-16"></div>
                    <div class="step-item" data-step="2">
                        <div class="step-circle step-inactive">2</div>
                        <span class="step-text md-block">Submit</span>
                    </div>
                    <div class="step-line md-w-16"></div>
                    <div class="step-item" data-step="3">
                        <div class="step-circle step-inactive">3</div>
                        <span class="step-text md-block">Print</span>
                    </div>
                    <div class="step-line md-w-16"></div>
                    <div class="step-item" data-step="4">
                        <div class="step-circle step-inactive">4</div>
                        <span class="step-text md-block">Sign</span>
                    </div>
                    <div class="step-line md-w-16"></div>
                    <div class="step-item" data-step="5">
                        <div class="step-circle step-inactive">5</div>
                        <span class="step-text md-block">Upload</span>
                    </div>
                </div>
            </div>

            <div id="leaveFormCard" class="main-content-card">
                <h1>Leave Request Form</h1>
                <form class="form-container" id="leaveRequestForm">
                    <div class="grid-layout lg-cols-4 form-group">
                        <div>
                            <label for="to">To</label>
                            <input type="text" id="to" name="to" value="HRD Manager" readonly>
                        </div>
                        <div>
                            <label for="thru">Thru</label>
                            <input type="text" id="thru" name="thru" value="Supervisor" readonly>
                        </div>
                        <div>
                            <label for="date">Date</label>
                            <input type="text" id="date" name="date" readonly>
                        </div>
                        <div>
                            <label for="department">Department</label>
                            <input type="text" id="department" name="department" value="Department" readonly>
                        </div>
                    </div>

                    <fieldset>
                        <legend>Employee Information</legend>
                        <div class="grid-layout md-cols-2 fieldset-content-mt">
                            <div>
                                <label for="employeeNumber" class="required-label" >Employee Number</label>
                                <input type="text" id="employeeNumber" name="employeeNumber" value="12345" readonly>
                            </div>
                            <div>
                                <label for="fullName" class="required-label">Full Name</label>
                                <input type="text" id="fullName" name="fullName" placeholder="Name">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                      <legend>Request Information</legend>
                        <div class="grid-layout md-cols-2 fieldset-content-mt">
                            <div>
                                <label for="leaveType" class="required-label">Leave Type</label>
                                <div class="flex-input-group">
                                    <select id="leaveType" name="leaveType">
                                        <option value="Sick Leave">Sick </option>
                                        <option value="Vacation Leave">Vacation </option>
                                        <option value="Paternity/Maternity Leave">Paternity/Maternity </option>
                                        <option value="Emergency Leave">Emergency </option>
                                        <option value="Birthday Leave">Birthday </option>
                                    </select>
                                    <select id="leaveDuration" name="leaveDuration">
                                        <option value="Full Day">Full Day</option>
                                        <option value="Half Day (AM)">Half Day (AM)</option>
                                        <option value="Half Day (PM)">Half Day (PM)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="grid-layout md-cols-2 fieldset-content-mt">
                            <div>
                                <label for="startDate" class="required-label">Start Date</label>
                                <div class="relative-input-wrapper">
                                    <input type="date" id="startDate" name="startDate" placeholder="YYYY-MM-DD">
                                    <div class="input-icon-wrapper">
                                    </div>
                                    </div>
                            </div>
                            <div>
                                <label for="endDate" class="required-label">End Date</label>
                                <div class="relative-input-wrapper">
                                    <input type="date" id="endDate" name="endDate" placeholder="YYYY-MM-DD">
                                    <div class="input-icon-wrapper">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fieldset-content-mt">
                            <label for="remarks">Remarks</label>
                            <input type="text" class="remarks" id="remarks" name="remarks" placeholder="Remarks"></textarea>
                        </div>
                    </fieldset>

                    <div class="submit-button-container">
                        <button type="button" class="submit-button" id="openModalBtn">
                            Submit
                        </button>
                    </div>
                </form>
            </div>

            <!-- New: Leave History Card -->
            <div id="leaveHistoryCard" class="main-content-card" style="display: none;">
                <div class="summary-cards-container">
                <div class="summary-card">
                    <div class="icon-circle bg-blue-100">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div class="info">
                        <span class="value" id="employee-count"></span>
                        <span class="label">Employees</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="icon-circle bg-yellow-100">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div class="info">
                        <span class="value" id="pending-count"></span>
                        <span class="label">Pending Requests</span>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="icon-circle bg-green-100">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M17 11h.01M9 15h.01M15 15h.01M13 19h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div class="info">
                        <span class="value" id="request-count"></span>
                        <span class="label">Requests This Year</span>
                    </div>
                </div>
            </div>

            <div class="search-filter-container">
                <div class="search-input-wrapper">
                    <input type="text" id="searchInput" placeholder="Search..." class="search-input">
                </div>
                <button id="filterToggleButton" class="filter-button">
                    <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"></path>
                    </svg>
                    Filter
                </button>
                <button id="resetButtonHistory" class="reset-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                      <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"/>
                      <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"/>
                    </svg>
                    Reset
                </button>
            </div>

            <div id="filterOptionsPopover" class="filter-options-popover">
                <div class="filter-group">
                    <label for="statusFilterDropdown">Status:</label>
                    <div id="statusFilterDropdown" class="filter-dropdown-container">
                        <span class="filter-selected-value" data-filter-for="status">All Statuses</span>
                        <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                        <div class="filter-dropdown-content" id="statusFilterContent">
                            <span class="filter-option" data-value="">All Statuses</span>
                            <span class="filter-option" data-value="approved">Approved</span>
                            <span class="filter-option" data-value="pending">Pending</span>
                            <span class="filter-option" data-value="rejected">Rejected</span>
                            <span class="filter-option" data-value="canceled">Cancelled</span>
                        </div>
                    </div>
                </div>
                <div class="filter-group">
                    <label for="departmentFilterDropdown">Department:</label>
                    <div id="departmentFilterDropdown" class="filter-dropdown-container">
                        <span class="filter-selected-value" data-filter-for="department">All Departments</span>
                        <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                        <div class="filter-dropdown-content" id="departmentFilterContent">
                            <span class="filter-option" data-value="">All Departments</span>
                            <span class="filter-option" data-value="EDITORIAL NEWS">EDITORIAL NEWS</span>
                            <span class="filter-option" data-value="EDITORIAL BUSINESS">EDITORIAL BUSINESS</span>
                            <span class="filter-option" data-value="CIRCULATION AND PRODUCTION">CIRCULATION AND PRODUCTION</span>
                            <span class="filter-option" data-value="HR & ADMINISTRATION">HR & ADMINISTRATION</span>
                            <span class="filter-option" data-value="ACCOUNTING & FINANCE">ACCOUNTING & FINANCE</span>
                            <span class="filter-option" data-value="GENERAL SERVICES">GENERAL SERVICES</span>
                            <span class="filter-option" data-value="CREDIT & COLLECTION">CREDIT & COLLECTION</span>
                            <span class="filter-option" data-value="ADVERTISING & SALES MARKETING">ADVERTISING & SALES MARKETING</span>
                            <span class="filter-option" data-value="MANAGEMENT INFORMATION SYSTEM">MANAGEMENT INFORMATION SYSTEM</span>
                        </div>
                    </div>
                </div>
                <button id="applyFiltersButton" class="apply-filters-button">Apply Filters</button>
            </div>

            <div class="table-container">
                <table class="data-table" id="leaveHistoryTable">
                    <thead>
                        <tr>
                            <th data-column="leaveID" data-type="string" data-sortable="true">Leave ID <span class="sort-icon"></span></th>
                            <th data-column="name" data-type="string" data-sortable="true">Name <span class="sort-icon"></span></th>
                            <th data-column="department" data-type="string" >Department </th>
                            <th data-column="startDate" data-type="date" >Start Date </th>
                            <th data-column="endDate" data-type="date" >End Date </th>
                            <th data-column="leaveType" data-type="string" >Leave Type </th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            </div>

            <!-- Employee Balance Card - Now a Table -->
            <div id="employeeBalanceCard" class="main-content-card" style="display: none;">
              <!-- New: Date Display at the top -->
            <div class="date-display-container" id="employeeBalanceTopDateDisplayContainer">
                <span class="name">Employee Leave Balance</span>
                <span class="weather-icon">☀️☁️</span>
                <span id="employeeBalanceDateDisplay"></span>
            </div>
                <div class="search-filter-container">
                <div class="search-input-wrapper">
                <input type="text" id="employeeBalanceSearchInput" placeholder="Search..." class="search-input">
                </div>
                    <button id="filterToggleButtonBalance" class="filter-button">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"></path>
                        </svg>
                      Filter
                     </button>
                     <button id="resetButtonBalance" class="reset-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                          <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"/>
                          <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"/>
                        </svg>
                        Reset
                    </button>
                </div>

    <div id="filterOptionsPopoverBalance" class="filter-options-popover">
        <div class="filter-group">
            <label for="departmentFilterDropdownBalance">Department:</label>
            <div id="departmentFilterDropdownBalance" class="filter-dropdown-container">
                <span class="filter-selected-value" data-filter-for="department">All Departments</span>
                <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
                <div class="filter-dropdown-content" id="departmentFilterContentBalance">
                    <span class="filter-option" data-value="">All Departments</span>
                    <span class="filter-option" data-value="EDTN">EDTN</span>
                    <span class="filter-option" data-value="EDTB">EDTB</span>
                    <span class="filter-option" data-value="CIRC">CIRC</span>
                    <span class="filter-option" data-value="HRAD">HRAD</span>
                    <span class="filter-option" data-value="ACCF">ACCF</span>
                    <span class="filter-option" data-value="GS">GS</span>
                    <span class="filter-option" data-value="CNC">CNC</span>
                    <span class="filter-option" data-value="ADT">ADT</span>
                    <span class="filter-option" data-value="MIS">MIS</span>
                </div>
            </div>
        </div>
        <button id="applyFiltersButtonBalance" class="apply-filters-button">Apply Filters</button>
    </div>

                <div class="table-container">
                    <table class="data-table" id="employeeBalanceTable">
                        <thead>
                            <tr>
                                <th data-column="name" data-type="string" data-sortable="true">Name <span class="sort-icon"></span></th>
                                <th data-column="department" data-type="string" >Department </th>
                                <th data-column="sickLeave" data-type="number">SL </th>
                                <th data-column="vacationLeave" data-type="number">VL </th>
                                <th data-column="maternityPaternity" data-type="number">M/P </th>
                                <th data-column="emergencyLeave" data-type="number">Emergency </th>
                                <th data-column="birthdayLeave" data-type="number">Birthday </th>
                                <th data-column="absent" data-type="number">Absent</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be dynamically loaded here from Google Sheet -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- New: Audit Logs Card -->
            <div id="auditLogsCard" class="main-content-card" style="display: none;">
              <div class="date-display-container" id="auditLogsTopDateDisplayContainer">
                <span class="name">Audit Logs</span>
                <span class="weather-icon">☀️☁️</span>
                <span id="auditLogsDateDisplay"></span>
              </div>
                <div class="search-filter-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="auditLogsSearchInput" placeholder="Search..." class="search-input">
                    </div>
                    <button id="filterToggleButtonAuditLogs" class="filter-button">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z" clip-rule="evenodd"></path>
                        </svg>
                        Filter
                    </button>
                    <button id="resetButtonLogs" class="reset-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                          <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"/>
                          <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"/>
                        </svg>
                        Reset
                    </button>
                </div>

                <div id="filterOptionsPopoverAuditLogs" class="filter-options-popover">
                    <div class="filter-group">
                        <label for="monthFilterDropdownAuditLogs">Month:</label>
                        <div id="monthFilterDropdownAuditLogs" class="filter-dropdown-container">
                            <span class="filter-selected-value" data-filter-for="month">All Months</span>
                            <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                            <div class="filter-dropdown-content" id="monthFilterContentAuditLogs">
                                <!-- Month options will be dynamically generated here -->
                            </div>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label for="yearFilterDropdownAuditLogs">Year:</label>
                        <div id="yearFilterDropdownAuditLogs" class="filter-dropdown-container">
                            <span class="filter-selected-value" data-filter-for="year">All Years</span>
                            <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                            <div class="filter-dropdown-content" id="yearFilterContentAuditLogs">
                                <!-- Year options will be dynamically generated here -->
                            </div>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label for="userFilterDropdownAuditLogs">User:</label>
                        <div id="userFilterDropdownAuditLogs" class="filter-dropdown-container">
                            <span class="filter-selected-value" data-filter-for="user">All Users</span>
                            <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                            <div class="filter-dropdown-content" id="userFilterContentAuditLogs">
                                <span class="filter-option" data-value="">All Users</span>
                                <span class="filter-option" data-value="hr.malaya@gmail.com">hr.malaya@gmail.com </span>
                                <span class="filter-option" data-value="mis.malaya@gmail.com">mis.malaya@gmail.com </span>
                                <span class="filter-option" data-value="josephinepascua.malaya@gmail.com">josephinepascua.malaya@gmail.com </span>
                                <span class="filter-option" data-value="abigailsubico.malaya@gmail.com">abigailsubisco.malaya@gmail.com </span>
                            </div>
                        </div>
                    </div>
                    <button id="applyFiltersButtonAuditLogs" class="apply-filters-button">Apply Filters</button>
                </div>

                <div class="table-container">
                    <table class="data-table" id="auditLogsTable">
                        <thead>
                            <tr>
                                <th data-column="logId" data-type="string" data-sortable="true">Log ID <span class="sort-icon"></span></th>
                                <th data-column="dateTime" data-type="datetime" data-sortable="true">Date and Time <span class="sort-icon"></span></th>
                                <th data-column="action" data-type="string">Action </th>
                                <th data-column="user" data-type="string" data-sortable="true">User <span class="sort-icon"></span></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="mediaUploadCard" class="main-content-card" style="display: none;">
                <h1>Media Upload</h1>
                <p class="media-upload-info">Add your documents here. Check the file number on the upper right corner of your paper.</p>

                <div class="file-number-group">
                    <label for="fileNumber" class="required-label">Enter File Number</label>
                    <input type="text" id="fileNumber" name="fileNumber" placeholder="Ex. SVL-00001">
                </div>

                <div class="media-drop-area" id="mediaDropArea">
                    <input type="file" id="mediaFileInput" multiple accept=".jpg, .jpeg, .png, .pdf">
                    <svg class="icon-upload" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 0 01-.88-7.903A5 0 0115.9 6L16 6a3 3 0 013 3v10a2 2 0 01-2 2H7a2 2 0 01-2-2V16m-2-6l4-4m0 0l4 4m-4-4v12"></path>
                    </svg>
                    <p>Drag your file(s) to start uploading</p>
                    <p class="or-divider">OR</p>
                    <button type="button" class="browse-files-btn">Browse files</button>
                </div>

                <p class="file-upload-restrictions">Only support .jpg, .png and .pdf files</p>

                <div class="media-file-list" id="mediaFileList">
                    </div>

                <div class="media-upload-buttons">
                    <button type="button" class="upload-btn" id="mediaUploadBtn">Upload</button>
                    <button type="button" class="cancel-btn" id="mediaUploadCancel">Cancel</button>
                </div>
            </div>

            <div id="forceLeaveCard" class="main-content-card" style="display: none;">
              <div class="date-display-container" id="forceLeaveTopDateDisplayContainer">
                <span class="name">Force Leave</span>
                <span class="weather-icon">☀️☁️</span>
                <span id="forceLeaveDateDisplay"></span>
              </div>
              
              <div class="name-list-container main-content-card mt-4">
                    <div class="table-scroll-wrapper">
                        <table class="data-table force-leave-names-table" id="confirmedForceLeaveNamesTable">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Name</th>
                                    <th>Department</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated dynamically by JavaScript (confirmed employees) -->
                            </tbody>
                        </table>
                    </div>
                </div>


                <div class="force-leave-buttons mt-4">
                    
                    <button class="btn btn-primary" id="addForceLeaveNameBtn">
                      Add
                    </button>
                    <button class="btn btn-secondary" id="editForceLeaveNameBtn">
                      Delete
                    </button>
                     <button class="btn btn-tertiary" id="clearForceLeaveNameBtn">
                      Clear
                    </button>
                
              </div>

              <div class="form-section mt-4">
             
                <div class="form-row">
                    <div class="form-group">
                        <label for="forceLeaveType">Leave Type</label>
                        <input type="text" id="forceLeaveType" class="form-input" value="Force Leave" readonly disabled>
                    </div>
                    <div class="form-group">
                        <label for="forceLeaveDuration">Duration<span class="required-asterisk">*</span></label>
                        <select id="forceLeaveDuration" class="form-input">
                            <option value="Full Day">Full Day</option>
                            <option value="Half Day">Half Day</option>
                        </select>
                    </div>
                </div>
                <div id="forceLeaveFormContainer">
                <form id="forceLeaveForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="startDateInput" class="required-label">Start Date</label>
                            <input type="date" id="startDateInput" name="startDate" required>
                            <div id="startDateError" class="error-message" style="display: none;"></div>
                        </div>
                        <div class="form-group">
                            <label for="endDateInput" class="required-label">End Date</label>
                            <input type="date" id="endDateInput" name="endDate" required>
                            <div id="endDateError" class="error-message" style="display: none;"></div>
                        </div>
                    </div>
                </form>
                <div class="form-actions">
                    <button type="button" class="btn btn-primary" id="submitForceLeaveForm">
                     Submit
                    </button>
                </div>
                <div class="history-button-container mt-4 flex justify-end">
                    <button class="btn btn-history" id="forceLeaveHistoryBtn">
                        <i class="fas fa-history mr-2"></i> Force Leave History
                    </button>
                </div>
            </div>

            <div id="forceLeaveModal" class="modal-overlay" style="display: none;">
                <div class="force-leave-modal-content">
                  <span class="close-modal-btn" id="closeForceLeaveModalBtn">×</span>
                  <h2>Add Employee to Force Leave</h2>
                  <form id="addForceLeaveForm">
                    <div class="form-group">
                      <label for="departmentSelect" class="required-label">Department</label>
                      <select id="departmentSelect" name="department" required>
                        <option value="" disabled selected>Select Department</option>
                        <option value="EDITORIAL NEWS">EDITORIAL NEWS</option>
                        <option value="EDITORIAL BUSINESS">EDITORIAL BUSINESS</option>
                        <option value="CIRCULATION AND PRODUCTION">CIRCULATION AND PRODUCTION</option>
                        <option value="HR & ADMINISTRATION">HR & ADMINISTRATION</option>
                        <option value="ACCOUNTING & FINANCE">ACCOUNTING & FINANCE</option>
                        <option value="GENERAL SERVICES">GENERAL SERVICES</option>
                        <option value="CREDIT & COLLECTION">CREDIT & COLLECTION</option>
                        <option value="ADVERTISING & SALES MARKETING">ADVERTISING & SALES MARKETING</option>
                        <option value="MANAGEMENT INFORMATION SYSTEM">MANAGEMENT INFORMATION SYSTEM</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="employeeScopeSelect" class="required-label">Scope</label>
                      <select id="employeeScopeSelect" name="employeeScope" required>
                        <option value="" disabled selected>Select Scope</option>
                        <option value="All">All Employees</option>
                        <option value="Specific">Specific Employee</option>
                      </select>
                    </div>
                     <div class="form-group">
                        <label for="employeeNameInput" class="required-label">Employee Name</label>
                        <input type="text" id="employeeNameInput" class="form-control" disabled>
                        <div id="employeeNameDropdown" class="autocomplete-dropdown" style="display: none;"></div>
                        <div id="employeeNameError" class="error-message" style="display: none;"></div>
                    </div>
                    <div class="name-list-container main-content-card mt-4">
                        <div class="table-scroll-wrapper">
                            <table class="data-table force-leave-names-table" id="previewForceLeaveNamesTable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Name</th>
                                        <th>Department</th>
                                        <th>Include</th> <!-- NEW: Checkbox column -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Populated dynamically by JavaScript (preview employees) -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-actions">
                      <button type="submit" class="modal-button apply" id="confirmForceLeaveModal">Add</button>
                      <button type="button" class="modal-button cancel" id="cancelForceLeaveModal">Cancel</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        <footer class="footer-section">
          <p class="footer-details"><a href="https://www.linkedin.com/in/christal-kaye-agmata-282b24373/?lipi=urn%3Ali%3Apage%3Ad_flagship3_people_connections%3B%2Biwgjc3BRaue6lqutnpjiw%3D%3D" target="_blank">Agmata, CKJ </a>|<a href="https://www.linkedin.com/in/samantha-chaves-638748333/" target="_blank"> Chaves, SD </a>|<a href="https://www.linkedin.com/in/carnationjhuliaderoxas/" target="_blank"> De Roxas, CJI </a>|<a href="https://www.linkedin.com/in/janelle-carla-galang-b31548346/" target="_blank"> Galang, JC </a>|<a href="https://www.linkedin.com/in/gelo-ramos/" target="_blank"> Ramos, AF</a></p>
          <p class="footer-details"> &copy; PLM Interns Summer 2025. All rights reserved.</p>
        </footer>
      </main>
    
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loader"></div>
    </div>

    <div id="submissionModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">
                <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <p class="modal-text">Are you sure you want to submit?</p>
            <div class="modal-actions">
                <button class="modal-button cancel" id="cancelSubmission">Cancel</button>
                <button class="modal-button apply" id="confirmSubmission">Apply</button>
            </div>
        </div>
    </div>

         <!-- Force Leave History Modal -->
   <div id="forceLeaveHistoryModal" class="modal-overlay">
        <div class="force-leave-history-modal-content">
            <span class="close-modal-btn" id="closeForceLeaveHistoryModalBtn">×</span>
            <h2>FORCE LEAVE HISTORY</h2>

            <div id="forceLeaveHistoryLoading" class="loading-spinner-container" style="display: none;">
                <div class="spinner"></div>
                <p>Fetching Data, please wait...</p>
            </div>
            <div class="filter-controls-container">
            <label for="departmentFilterSelect" class="filter-label">Filter by Department:</label>
            <select id="departmentFilterSelect" class="filter-dropdown">
                <option value="all">All Departments</option>
                </select>
            <label for="monthFilterSelect" class="filter-label">Filter by Month:</label>
            <select id="monthFilterSelect" class="filter-dropdown">
                <option value="all">All Months</option>
                <option value="01">January</option>
                <option value="02">February</option>
                <option value="03">March</option>
                <option value="04">April</option>
                <option value="05">May</option>
                <option value="06">June</option>
                <option value="07">July</option>
                <option value="08">August</option>
                <option value="09">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
                </select>
            <label for="yearFilterSelect" class="filter-label">Filter by Year:</label>
            <select id="yearFilterSelect" class="filter-dropdown">
                <option value="all">All Years</option>
                </select>
            </div>

            <div class="name-list-container main-content-card mt-4">
            <div class="table-scroll-wrapper">
                    <table class="data-table force-leave-names-table" id="forceLeaveHistoryTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Date Submitted</th> 
                                <th>Employee Name</th>
                                <th>Department</th>
                                <th>Duration</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <div id="confirmationModal" class="modal-overlay" style="display: none;">
    <div class="modal-content confirmation-modal-content">
        <p id="confirmationMessage" class="confirmation-message"></p>
        <div class="modal-actions confirmation-actions">
            <button id="confirmYesBtn" class="modal-button apply">Yes</button>
            <button id="confirmNoBtn" class="modal-button cancel">No</button>
        </div>
    </div>
</div>
    <?!= include('script');?>
</body>
</html>
